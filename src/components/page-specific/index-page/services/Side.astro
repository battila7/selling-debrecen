---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

import type { AstroComponent } from "@lucide/astro";
import ServiceCard from "./ServiceCard.astro";

export type Service = {
  title: string;
  description: string;
  icon: AstroComponent;
};

type Props = {
  image: ImageMetadata;
  title: string;
  description: string;
  link: string;
  linkText: string;
  services: Service[];
};

const { image, title, description, link, linkText, services } = Astro.props;
---

<div class="relative w-full">
  <div class="flex flex-col lg:flex-row">
    <!-- Full-width Background Image Column extending to left edge -->
    <div
      class="lg:w-5/12 flex items-center justify-center relative min-h-[500px] lg:min-h-[700px]"
    >
      <Image
        src={image}
        alt=""
        format="webp"
        class="absolute inset-0 w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-navy/75"></div>
      <div class="relative">
        <div class="w-full max-w-2xl lg:max-w-xl px-4 lg:pr-12 xl:pr-16">
          <div class="lg:py-16">
            <h3
              class="font-old-style text-4xl md:text-5xl text-cream mb-6 tracking-wide"
            >
              {title}
            </h3>
            <div class="w-16 h-0.5 bg-white mb-6"></div>
            <p class="text-cream-soft text-lg leading-relaxed mb-8">
              {description}
            </p>
            <a
              href={link}
              class="hidden lg:inline-block px-6 py-3 border-2 border-white text-white font-system-ui text-sm tracking-wide uppercase hover:border-camel hover:bg-camel hover:text-navy transition-colors duration-300"
            >
              {linkText}
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Services Grid -->
    <div
      class="lg:w-7/12 bg-navy flex items-center py-16 px-4 lg:pl-12 xl:pl-16"
    >
      <div class="w-full max-w-4xl mx-auto lg:mx-0">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
          {services.map((service) => <ServiceCard {...service} />)}
        </div>
      </div>
    </div>

    <div class="w-full flex justify-center pb-16 lg:hidden">
      <a
        href={link}
        class="inline-block px-6 py-3 border-2 border-white text-white font-system-ui text-sm tracking-wide uppercase hover:border-camel hover:bg-camel hover:text-navy transition-colors duration-300"
      >
        {linkText}
      </a>
    </div>
  </div>
</div>
